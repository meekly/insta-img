# Оптимизация загрузки изображений #

1. Разработать приложение (сервис) для обмена фотографиями (на подобие instagram). Для реализации использовать любой серверный язык программирования.

2. При загрузке пользователем изображения реализовать механизм автоматической подготовки минифицированных версий изоражения (например `100*100`, `250*250`). Для работы можно использовать любой из инструментов (Imagemagick, Jpegtran, Jpegoptim, Optipng и тд). Можно скомбинировать несколько инструментов.

3. При отображении страницы с изображениями, на общей странице подгружать минифицированную версию, при клике по изображению открывать его полную версию.

4. Разработать web-worker, который по заданным правилам (по запуску адином, по таймингу и тд) будет проходить по папке с загруженными изображениями и достраивать отсутствующие минифицированные изображения.

5. Добавить ленивую загрузку изображений (подгружаются первые N фотографий, остальные догружаются при скролинге)

6. Произвести нагрузочное тестирование и оценить эффект от минификации.

7. Подготовить отчет о проделанной работе с выводами.


----

# Отчёт о проделанной работе с выводами

1. Было разработано приложение с использованием фреймворка Sinatra
2. С помощью пакета MiniMagick производится сжатие изображения во время загрузки
3. Выполняется
Для запуска приложения: `rake start`
Для запуска приложения с использованием MiniMagick: `rake start_useim`
4. Worker запускается командой: `rake minify`. Производит сжатие только несжатых изображений.
5. Done using lazyload
6. Done
7. Было протестировано с 30 изображениями на одной странице.

Без минификации и загрузки страница весила около 30mb и загружалась около минуты.
С минификацией страница весила 1.3mb и загружалась 10 секунд.
С минификацией и ленивой загрузкой размер страницы упал до 400kb и скорость загрузки возросла до 325ms.
Минификация изображений - мощное средство уменьшения размера страниц. Ленивая загрузка позволяет ускорить загрузку по максимуму.
